# Carian Observatory AI Infrastructure Platform Environment Configuration
# Copy this file to .env and customize the values for your setup

# =============================================================================
# CONTAINER PREFIX FOR CARIAN OBSERVATORY PLATFORM
# =============================================================================
# Prefix all container names with co for consistent branding
# Use 'co' for Carian Observatory deployments, or customize as needed
USER_PREFIX=co

# =============================================================================
# PROJECT NAMING
# =============================================================================
# Docker Compose project name (affects network and volume naming)
COMPOSE_PROJECT_NAME=carian-observatory

# =============================================================================
# DOCKER IMAGE TAGS
# =============================================================================
OLLAMA_DOCKER_TAG=latest
WEBUI_DOCKER_TAG=main

# =============================================================================
# OPEN-WEBUI CONFIGURATION
# =============================================================================
# Secret key for Open-WebUI (generate a random string)
WEBUI_SECRET_KEY=your-secret-key-here

# =============================================================================
# API KEYS (Optional - configure as needed)
# =============================================================================
# OpenAI API Configuration
OPENAI_API_BASE_URL=https://api.openai.com/v1
OPENAI_API_KEY=

# ElevenLabs TTS
ELEVENLABS_API_KEY=

# Perplexity AI
PERPLEXITY_API_KEY=

# Anthropic Claude
CLAUDE_API_KEY=

# OpenRouter (recommended for multiple model access)
ENABLE_OPENROUTER_API=true
OPENROUTER_API_KEY=
OPENROUTER_API_BASE_URL=https://openrouter.ai/api/v1

# =============================================================================
# RSS FEEDS FOR GLANCE DASHBOARD
# =============================================================================
# RSS feed URLs for external content aggregation
# These will be populated automatically from OPML processing
RSS_FEED_TECH_NEWS=
RSS_FEED_HOMELAB=
RSS_FEED_SELFHOSTED=
RSS_FEED_KUBERNETES=
RSS_FEED_DOCKER=
RSS_FEED_AI_NEWS=

# =============================================================================
# PRIVACY & TELEMETRY
# =============================================================================
SCARF_NO_ANALYTICS=true
DO_NOT_TRACK=true
ANONYMIZED_TELEMETRY=false

# =============================================================================
# MACHINE IDENTIFICATION (Auto-detected, but can be overridden)
# =============================================================================
# Uncomment and set if you want to override auto-detection
# MACHINE_TYPE=mini  # Options: mini, m4, m2

# =============================================================================
# DOMAIN CONFIGURATION
# =============================================================================
# Primary domain for your services (replace with your actual domain)
PRIMARY_DOMAIN=yourdomain.com

# Legacy machine identifier - no longer used (simplified domain structure)
# MACHINE_ID=m4

# Service subdomains
WEBUI_SUBDOMAIN=webui
PERPLEXICA_SUBDOMAIN=perplexica
SEARXNG_SUBDOMAIN=search
AUTH_SUBDOMAIN=auth
HOMEPAGE_SUBDOMAIN=homepage
GLANCE_SUBDOMAIN=glance
CANARY_SUBDOMAIN=webui-canary
MONITORING_SUBDOMAIN=monitoring

# Constructed domain names (used by nginx configuration)
# Simplified structure: no machine ID suffixes
WEBUI_DOMAIN=${WEBUI_SUBDOMAIN}.${PRIMARY_DOMAIN}
PERPLEXICA_DOMAIN=${PERPLEXICA_SUBDOMAIN}.${PRIMARY_DOMAIN}
AUTH_DOMAIN=${AUTH_SUBDOMAIN}.${PRIMARY_DOMAIN}
HOMEPAGE_DOMAIN=${HOMEPAGE_SUBDOMAIN}.${PRIMARY_DOMAIN}
GLANCE_DOMAIN=${GLANCE_SUBDOMAIN}.${PRIMARY_DOMAIN}
CANARY_DOMAIN=${CANARY_SUBDOMAIN}.${PRIMARY_DOMAIN}
MONITORING_DOMAIN=${MONITORING_SUBDOMAIN}.${PRIMARY_DOMAIN}

# Generic domains for fallback/examples
GENERIC_WEBUI_DOMAIN=webui.yourdomain.com
GENERIC_PERPLEXICA_DOMAIN=perplexica.yourdomain.com
GENERIC_AUTH_DOMAIN=auth.yourdomain.com
GENERIC_HOMEPAGE_DOMAIN=homepage.yourdomain.com
GENERIC_GLANCE_DOMAIN=glance.yourdomain.com
GENERIC_MONITORING_DOMAIN=monitoring.yourdomain.com

# =============================================================================
# SERVICE PORTS
# =============================================================================
# Production service ports
WEBUI_PORT=8080
PERPLEXICA_PORT=3000
SEARXNG_PORT=8080
AUTHELIA_PORT=9091

# Canary service ports (different to avoid conflicts)
CANARY_WEBUI_PORT=8081
CANARY_PERPLEXICA_PORT=3001
CANARY_SEARXNG_PORT=8082
CANARY_AUTHELIA_PORT=9092

# =============================================================================
# AUTHENTICATION SECRETS
# =============================================================================
# Generate with: openssl rand -hex 32
AUTHELIA_SESSION_SECRET=change_me_to_random_32_char_string
AUTHELIA_STORAGE_ENCRYPTION_KEY=change_me_to_random_32_char_string

# Grafana admin password
GRAFANA_PASSWORD=change_me_to_secure_password

# Canary authentication secrets
CANARY_SESSION_SECRET=change_me_to_random_32_char_string_canary
CANARY_STORAGE_ENCRYPTION_KEY=change_me_to_random_32_char_string_canary

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================
# Docker network subnets
PRODUCTION_NETWORK_SUBNET=172.25.0.0/16
CANARY_NETWORK_SUBNET=172.26.0.0/16

# Ollama connection
OLLAMA_HOST=host.docker.internal
OLLAMA_PORT=11434
OLLAMA_BASE_URL=http://${OLLAMA_HOST}:${OLLAMA_PORT}

# =============================================================================
# POSTGRESQL CONFIGURATION
# =============================================================================
# Database name for Open-WebUI memory storage
POSTGRESQL_DB=carian_memories

# PostgreSQL user (change if needed)
POSTGRESQL_USER=carian_user

# PostgreSQL password - CHANGE THIS to a secure random password
# Generate with: openssl rand -hex 32
POSTGRESQL_PASSWORD=change_me_to_random_password

# PostgreSQL connection details
POSTGRESQL_HOST=co-postgresql-service
POSTGRESQL_PORT=5432

# Database URL for Open-WebUI (constructed from above)
DATABASE_URL=postgresql://${POSTGRESQL_USER}:${POSTGRESQL_PASSWORD}@${POSTGRESQL_HOST}:${POSTGRESQL_PORT}/${POSTGRESQL_DB}

# Vector database configuration
VECTOR_DB=pgvector
PGVECTOR_MAX_VECTOR_LENGTH=1536
PGVECTOR_AUTO_CREATE_EXTENSION=false  # Extension created in init scripts

# PostgreSQL subdomain (if adding admin interface like pgAdmin)
POSTGRESQL_SUBDOMAIN=db
POSTGRESQL_DOMAIN=${POSTGRESQL_SUBDOMAIN}.${PRIMARY_DOMAIN}

# =============================================================================
# DEVELOPMENT OPTIONS
# =============================================================================
# Set to true for development/debugging
DEBUG_MODE=false

# Resource limits (uncomment for lower-spec machines like MBA)
# OLLAMA_MEMORY_LIMIT=8g
# WEBUI_MEMORY_LIMIT=2g
# PERPLEXICA_MEMORY_LIMIT=2g
# POSTGRESQL_MEMORY_LIMIT=1g
